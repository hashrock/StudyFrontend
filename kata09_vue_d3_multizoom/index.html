<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../bower_components/vue/dist/vue.js"></script>
    <script src="../bower_components/d3/d3.js"></script>
    <style>
        div.box{
            width: 300px;
            height: 300px;
            border: solid 1px black;
        }

        .axis path, .axis line {
            fill: none;
            stroke: #fff;
        }

        rect{
            fill: #ccc;
        }
    </style>
</head>
<body>
    <div id="main">
        <div class="box" v-repeat="graph:graphs" v-component="box-component">
        </div>
    </div>


    <script>
        var margin = {top: 20, right: 20, bottom: 30, left: 40},
                width = 300 - margin.left - margin.right,
                height = 300 - margin.top - margin.bottom;

        var x = d3.scale.linear()
                .domain([-width / 2, width / 2])
                .range([0, width]);

        var y = d3.scale.linear()
                .domain([-height / 2, height / 2])
                .range([height, 0]);

        var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom")
                .tickSize(-height);

        var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left")
                .ticks(5)
                .tickSize(-width);






        Vue.component("box-component", {
            ready:function(){
                var zoom = d3.behavior.zoom()
                        .x(x)
                        .y(y)
                        .scaleExtent([1, 10])
                        .on("zoom", function(){
                            svg.select(".x.axis").call(xAxis);
                            svg.select(".y.axis").call(yAxis);
                        });

                var svg = d3.select(this.$el).append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                        .call(zoom);


                svg.append("rect")
                        .attr("width", width)
                        .attr("height", height);

                svg.append("g")
                        .attr("class", "x axis")
                        .attr("transform", "translate(0," + height + ")")
                        .call(xAxis);

                svg.append("g")
                        .attr("class", "y axis")
                        .call(yAxis);


            }
        });


        new Vue({
            el:"#main",
            data:{
                graphs:[
                    {name:"Taro"},
                    {name:"John"},
                    {name:"James"}
                ]
            }
        });
    </script>
</body>
</html>